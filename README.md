# AI 챗봇 서비스 (ChatAI)

VIP onboarding 팀을 위한 고객사 시연용 AI 챗봇 API 서비스

## 과제 분석

고객사가 원하는 기능에 집중해서 구현할 수 있도록 우선순위를 정리했습니다.

### 우선순위 결정
1. **1순위 (시연 필수)**: 채팅 기능 - 고객사가 실제로 체험할 수 있는 핵심 기능
2. **2순위 (기본 구조)**: 사용자 관리 - 채팅을 위한 최소한의 기반
3. **3순위 (후순위)**: JWT 토큰 - 시연에는 필요없다고 판단하여 후순위로 선정

결과적으로 **채팅 기능에 집중**하여 고객사가 실제 AI와 대화할 수 있는 경험을 제공하는데 우선순위를 두었습니다.

## AI 활용 과정

### 초기 시도와 문제점
처음에는 `CLAUDE.md` 등을 이용해서 AI와 함께 개발해보려고 했으나, **프롬프팅하는데 시간이 너무 오래걸렸습니다**. 
저의 개발 스타일에 맞게 AI를 활용하는 것이 어려웠습니다.

### 해결 방법: Git 기반 학습 전략
그래서 다음과 같은 방식으로 접근했습니다:

1. **작은 단위 커밋**: 가장 간단한 기능들(로그인, 회원가입)을 가장 작은 단위로 커밋을 나눠서 구현
2. **Git을 통한 패턴 학습**: 점진적으로 내가 어떻게 코딩하는지 git 이력을 통해 관리
3. **AI에게 학습 자료 제공**: Chat 사용 시 `requirements.md`를 보고 나의 git 이력을 보고 나와 비슷하게 설계하도록 명령
4. **작은 단위 개발**: AI가 나와 비슷한 방식으로 작은 단위로 개발할 수 있도록 지시

### 어려움과 깨달음
- **프롬프팅 비용**: 복잡한 요구사항을 AI에게 전달하는 것 자체가 시간 소모적
- **개발 스타일 차이**: AI의 기본 접근 방식과 개인의 개발 패턴 간 차이
- **효율적 협업**: Git 히스토리와 문서를 활용한 컨텍스트 공유가 더 효과적

## 구현하기 어려웠던 기능

### 1. 실제 OpenAI API와 채팅하는 기능

**어려웠던 이유:**
- 대화 히스토리를 유지하면서 OpenAI API에 요청을 보내는 로직
- 30분 스레드 만료 규칙과 대화 컨텍스트 관리를 동시에 처리
- 개발 환경에서는 실제 API 호출 없이 테스트 가능한 구조 필요

**해결 접근:**
```kotlin
// 1. 대화 히스토리를 OpenAI 메시지 형식으로 변환
private fun buildOpenAIMessages(existingChats: List<Chat>, newQuestion: String): List<OpenAIMessage>

// 2. Profile 기반으로 Mock/Real 구현체 분리
@Service @Profile("!production")
class MockOpenAIService : OpenAIService

@Service @Profile("production") 
class OpenAIServiceImpl : OpenAIService  // RestTemplate으로 실제 API 호출
```

### 2. 데이터베이스 설정

**어려웠던 이유:**
- PostgreSQL을 실제로 사용해본 경험이 부족
- 시연 환경에서 빠르게 보여주기 위해 추가 설정 없이 동작해야 함

**해결 접근:**
- **모든 환경에서 H2 사용**: 구현을 모두 H2로 진행
- **시연 우선**: 실제 DB 연결보다는 빠르게 기능을 보여주는 것에 집중
- **Production도 H2**: 별도 DB 설치 없이 바로 시연 가능한 구조

**결과:**
- 실제 OpenAI API 연동까지 완전히 구현 완료
- H2로 통일하여 어떤 환경에서든 바로 실행 가능한 구조 완성